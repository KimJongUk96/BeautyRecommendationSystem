<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.brs.mapper.methodSuggestMapper">

	<select id="read" resultType="com.brs.domain.method.MethodVO">
	select m.method_no, m.step, p.product_name, m.method
	from tbl_product p, tbl_method_detail m
	where p.product_no=m.product_no and m.method_no=#{method_no}
	</select>

	<select id="listCriteria" resultType="com.brs.domain.method.MethodVO">
	<![CDATA[
	select * from (
	select rownum rnum, m.method_no, md.step, p.name, md.method
	from (select method_no
			from tbl_method
			where skin_type=#{skinType} and makeup_degree=#{makeUp} and weather=#{weather} and dust=#{dust}) m, 
		 tbl_product p, tbl_method_detail md 
	where p.prod_no=md.prod_no and m.method_no=md.method_no and method_no>0)
	where rnum >= #{pageStart}
	and rnum <= #{pageEnd}
	order by method_no asc, step asc
	]]>
	</select>

	<select id="countPaging" resultType="int">
	<![CDATA[
	select count(method_no)
	from tbl_method
	where method_no > 0 
	]]>
	</select>

<select id="search" resultType="com.brs.domain.method.MethodVO">
SELECT *
  FROM TBL_METHOD
 WHERE SKIN_TYPE = #{skinType}
   AND MAKEUP_DEGREE = #{makeUpDegree}
   AND WEATHER = #{weather}
   AND DUST = #{dust}
</select>

</mapper>